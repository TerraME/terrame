<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
	    
	    	<title>TerraME Types and Functions</title>
	    
	    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
		<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
	</head>

	<body>
		<div id="container">
			<div id="product">
				<div id="product_logo">
					<a href="http://www.terrame.org">
					<img src='../img/terrame.png'/><br/></div></a>
				<div id="product_name"><big><b></b></big></div>
				<div id="product_description"></div>
			</div> <!-- id="product" -->

			<div id="main">
				<div id="navigation">
					<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<h1>base</h1>
<ul>
	
		<li><a href="../index.html">Index</a></li>
	
</ul>

<!-- Module list -->


<!-- Models list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	


<!-- Types list -->

	
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Types</h1>
	

	<ul>
		
					<li>
						<a href="../files/Agent.html">Agent</a>
					</li>
				
			
		
					<li>
						<a href="../files/Automaton.html">Automaton</a>
					</li>
				
			
		
					<li>
						<a href="../files/Cell.html">Cell</a>
					</li>
				
			
		
					<li>
						<a href="../files/CellularSpace.html">CellularSpace</a>
					</li>
				
			
		
					<li>
						<a href="../files/Chart.html">Chart</a>
					</li>
				
			
		
					<li>
						<a href="../files/Choice.html">Choice</a>
					</li>
				
			
		
					<li>
						<a href="../files/Clock.html">Clock</a>
					</li>
				
			
		
					<li><strong>Environment</strong></li>
				
			
		
		
					<li>
						<a href="../files/Event.html">Event</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Flow.html">Flow</a>
					</li>
				
			
		
					<li>
						<a href="../files/Group.html">Group</a>
					</li>
				
			
		
					<li>
						<a href="../files/InternetSender.html">InternetSender</a>
					</li>
				
			
		
					<li>
						<a href="../files/Jump.html">Jump</a>
					</li>
				
			
		
					<li>
						<a href="../files/LogFile.html">LogFile</a>
					</li>
				
			
		
					<li>
						<a href="../files/Mandatory.html">Mandatory</a>
					</li>
				
			
		
					<li>
						<a href="../files/Map.html">Map</a>
					</li>
				
			
		
					<li>
						<a href="../files/Model.html">Model</a>
					</li>
				
			
		
					<li>
						<a href="../files/Neighborhood.html">Neighborhood</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Random.html">Random</a>
					</li>
				
			
		
					<li>
						<a href="../files/SocialNetwork.html">SocialNetwork</a>
					</li>
				
			
		
					<li>
						<a href="../files/Society.html">Society</a>
					</li>
				
			
		
					<li>
						<a href="../files/State.html">State</a>
					</li>
				
			
		
					<li>
						<a href="../files/TextScreen.html">TextScreen</a>
					</li>
				
			
		
					<li>
						<a href="../files/Timer.html">Timer</a>
					</li>
				
			
		
					<li>
						<a href="../files/Trajectory.html">Trajectory</a>
					</li>
				
			
		
					<li>
						<a href="../files/UnitTest.html">UnitTest</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/VisualTable.html">VisualTable</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Files list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Functions</h1>
	

	<ul>
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/ErrorHandling.html">ErrorHandling</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/FileSystem.html">FileSystem</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Package.html">Package</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Utils.html">Utils</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Examples -->

	
		<h1><a href="../files/examples.html">Examples</a></h1>
	



<!-- Data -->

	
		<h1><a href="../files/data.html">Data</a></h1>
	



<!-- Font -->

	
		<h1><a href="../files/font.html">Font</a></h1>
	




				</div> <!-- id="navigation" -->

				<div id="content">
					<h1>Environment
					
					
					</h1>

					
						<span class="description"></span>
					
					
					
					

					
						
						<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">



<span class="description">

A container that encapsulates space, time, behavior, and other Environments. Objects can be added directly when the Environment is declared or after it has been instantiated. It can control the simulation engine, synchronizing all the <a href=../files/Timer.html>Timers</a> within it, or instantiate relations between sets of objects. Calling <a href=../files/Utils.html#forEachElement>forEachElement()</a> traverses each object of an Environment. If the Environment has a set of <a href=../files/Model.html>Model</a> instances, it is possible to call <a href=../files/Utils.html#forEachModel>forEachModel()</a> to transverse them.</span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>...</strong>: <a href=../files/Agent.html>Agents</a>, <a href=../files/Automaton.html>Automatons</a>, <a href=../files/Cell.html>Cells</a>, <a href=../files/CellularSpace.html>CellularSpaces</a>, <a href=../files/Society.html>Societies</a>, <a href=../files/Trajectory.html>Trajectories</a>, <a href=../files/Group.html>Groups</a>, Timers, Environments, or instances of Models.
    </li> 
    
  
  </span></ul>



<!-- Outputs of the function -->
  <h3>Attributes</h3>
Some attributes of Environment have internal semantics. They can be used as <b>read-only</b> by the modeler.</p>
<ul>
<span class="output">
	
	<li>
	  <strong>cObj_</strong>: A pointer to a C++ representation of the Environment. Never use this object.
	</li>
	
</span>
</ul>





<h3>Usage</h3>
<pre class="example"><code><span class="id">environment</span> = <span class="function">Environment</span>{
    <span class="id">cs1</span> = <span class="function">CellularSpace</span>{<span class="id">xdim</span> = <span class="number">10</span>},
    <span class="id">ag1</span> = <span class="function">Agent</span>{},
    <span class="id">t1</span> = <span class="function">Timer</span>{}
}</code></pre>




</dd>


						
						

						
							<h2 class="function_list">Functions</h2>
							<table class="function_list">
							
								
									<tr>
										<td class="name" nowrap><a href="#add">add</a>&nbsp;
<td class="summary">Add an element to the Environment.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#createPlacement">createPlacement</a>&nbsp;
<td class="summary">Create relations between behavioural entities (<a href=files/Agent.html>Agents</a>) and spatial entities (<a href=files/Cell.html>Cells</a>).</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#execute">execute</a>
										<i><font color="gray"> (deprecated)</font></i>&nbsp;
<td class="summary">Run the Environment.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#getTime">getTime</a>&nbsp;
<td class="summary">Return the older simulation time of its <a href=files/Timer.html>Timers</a>.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#loadNeighborhood">loadNeighborhood</a>&nbsp;
<td class="summary">Load a <a href=files/Neighborhood.html>Neighborhood</a> between two different <a href=files/CellularSpace.html>CellularSpaces</a>.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#notify">notify</a>&nbsp;
<td class="summary">Notify every Observer connected to the Environment.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#run">run</a>&nbsp;
<td class="summary">Run the Environment until a given time.</td>
									</tr>
								
							
						
						</table>
					

					

					<!--<br/>
					<br/>-->

					
						
						<dl class="function">
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="add">

	</a><strong>add</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Add an element to the Environment.</span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: An <a href=../files/Agent.html>Agent</a>, <a href=../files/Automaton.html>Automaton</a>, <a href=../files/Cell.html>Cell</a>, <a href=../files/CellularSpace.html>CellularSpace</a>, <a href=../files/Society.html>Society</a>, <a href=../files/Trajectory.html>Trajectory</a>, <a href=../files/Group.html>Group</a>, <a href=../files/Timer.html>Timer</a>, or Environment.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">environment</span> = <span class="function">Environment</span>{}

<span class="id">cs1</span> = <span class="function">CellularSpace</span>{<span class="id">xdim</span> = <span class="number">10</span>}
<span class="id">ag1</span> = <span class="function">Agent</span>{}
<span class="id">t1</span> = <span class="function">Timer</span>{}

<span class="id">environment</span>:<span class="function">add</span>(<span class="id">cs1</span>)
<span class="id">environment</span>:<span class="function">add</span>(<span class="id">ag1</span>)
<span class="id">environment</span>:<span class="function">add</span>(<span class="id">t1</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="createPlacement">

	</a><strong>createPlacement</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Create relations between behavioural entities (<a href=../files/Agent.html>Agents</a>) and spatial entities (<a href=../files/Cell.html>Cells</a>). It is possible to have more than one behavioural entity within the Environment, but it must have only one <a href=../files/CellularSpace.html>CellularSpace</a>, <a href=../files/Trajectory.html>Trajectory</a>, or Cell. When distributing Agents over a Trajectory or a Cell, the Agents will be able to move over the whole CellularSpace. Note that this function uses rules that will be used only to build the placement. It is up to the modeler to implement such rules for the rest of the simulation if needed. For example, one can use argument max equals to one to indicate that the placement must have at most one Agent per Cell, but it works only to create the placement, having no effect along the simulation.<br><br></span>


	


<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>max</strong>: A number representing the maximum number of Agents that can enter in the same Cell when creating the placement. As default it will add at most one Agent per Cell. Note that using this argument does not ensure a maximum number of agents inside Cells along the simulation - controlling the maximum is always up to the modeler.
    </li> 
    
  
    <li>
	  <strong>name</strong>: A string with the name of the relation. The default value is "placement", which means that the modeler can use <a href=../files/Agent.html#enter>Agent:enter()</a>, <a href=../files/Agent.html#move>Agent:move()</a>, and <a href=../files/Agent.html#leave>Agent:leave()</a> without needing to refer to the name of the placement. If the name is different from the default value, the modeler will have to use the last argument of these functions with the name of the placement.
    </li> 
    
  
    <li>
	  <strong>strategy</strong>: A string containing the strategy to be used to create a placement between Agents and Cells. See the options below:
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            Strategy
            </th>
          
          
            <th>
            Description
            </th>
          
          
            <th>
            Arguments
            </th>
          
        
        <tr>
        
          
            <td>
            "random"(default)
            </td>
          
          
            <td>
            Choose a Cell randomly and put max agents also chosen randomly. Repeat this process until allocate all Agents. The last Cell chosen might have less than max Agents. All the Cells that were not chosen in this process will remain empty.
            </td>
          
          
            <td>
            max, name
            </td>
          
        
        <tr>
        
          
            <td>
            "uniform"
            </td>
          
          
            <td>
            Create placements uniformly. The first Agent enters in the first Cell, the second one in the second Cell, and so on. If it reaches the last Cell of the CellularSpace or Trajectory then it starts again in the first Cell. The last Cells will contain fewer Agents if the number of Agents is not proportional to the number of Cells. For example, placing a <a href=../files/Society.html>Society</a> with four Agents into a CellularSpace of three Cells will put two Agents in the first Cell and one in the other two Cells.
            </td>
          
          
            <td>
            name
            </td>
          
        
        <tr>
        
          
            <td>
            "void"
            </td>
          
          
            <td>
            This strategy creates an empty placement in each Cell and Agent. It is necessary to use this strategy if the modeler needs to establish the relations between Agents and Cells by himself/herself. In this case, Agents cannot use <a href=../files/Agent.html#move>Agent:move()</a> or <a href=../files/Agent.html#walk>Agent:walk()</a> before calling <a href=../files/Agent.html#enter>Agent:enter()</a> explicitly.
            </td>
          
          
            <td>
            name
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">ag</span> = <span class="function">Agent</span>{}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">ag</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">cs</span> = <span class="function">CellularSpace</span>{<span class="id">xdim</span> = <span class="number">10</span>}
<span class="id">env</span> = <span class="function">Environment</span>{<span class="id">soc</span>, <span class="id">cs</span>}
<span class="id">env</span>:<span class="function">createPlacement</span>()</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="execute">

	
		

		</a><font color="gray">execute <i>(deprecated, use
				
				<a href="../files/Timer.html#run">run (Timer)</a> 
			
		instead)</i></font>&nbsp;
	

</h2></dt>
<dd>

<font color="gray">
<span class="description">

Run the Environment.<br><br></span>










</font>


</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="getTime">

	</a><strong>getTime</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Return the older simulation time of its <a href=../files/Timer.html>Timers</a>.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">env</span> = <span class="function">Environment</span>{
    <span class="function">Timer</span>{<span class="function">Event</span>{<span class="id">action</span> = <span class="reserved">function</span>() <span class="reserved">end</span>}}
}

<span class="id">env</span>:<span class="id">run</span>(<span class="number">10</span>)
<span class="id">print</span>(<span class="id">env</span>:<span class="function">getTime</span>())</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="loadNeighborhood">

	</a><strong>loadNeighborhood</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Load a <a href=../files/Neighborhood.html>Neighborhood</a> between two different <a href=../files/CellularSpace.html>CellularSpaces</a>.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>bidirect</strong>: A boolean value. If true then, for each relation from <a href=../files/Cell.html>Cell</a> a to Cell b loaded from the file, it will also create a relation from b to a. The default value is false.
    </li> 
    
  
    <li>
	  <strong>name</strong>: A string with the name of the relation to be created. The default value is "1".
    </li> 
    
  
    <li>
	  <strong>source</strong>: A string representing the name of the file to be loaded.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">river</span> = <span class="function">CellularSpace</span>{
    <span class="id">file</span> = <span class="id">filePath</span>(<span class="string">"River_lin.shp"</span>)
}

<span class="id">emas</span> = <span class="function">CellularSpace</span>{
    <span class="id">file</span> = <span class="id">filePath</span>(<span class="string">"emas.shp"</span>)
}

<span class="id">env</span> = <span class="function">Environment</span>{<span class="id">emas</span>, <span class="id">river</span>}
<span class="id">env</span>:<span class="function">loadNeighborhood</span>{<span class="id">source</span> = <span class="id">filePath</span>(<span class="string">"gpmlinesDbEmas.gpm"</span>, <span class="string">"base"</span>)}</code></pre>




<h3>See also</h3>
<ul>
	
	<li>
		

			<a href="../files/Package.html#filePath">filePath (Package)	</a>
		
	</li>
	
</ul>

</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="notify">

	</a><strong>notify</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Notify every Observer connected to the Environment.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A number representing the notification time. The default value is zero. It is also possible to use an <a href=../files/Event.html>Event</a> as argument. In this case, it will use the result of <a href=../files/Event.html#getTime>Event:getTime()</a>.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">env</span> = <span class="function">Environment</span>{}
<span class="id">env</span>:<span class="function">notify</span>()</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="run">

	</a><strong>run</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Run the Environment until a given time. It activates the <a href=../files/Timer.html>Timers</a> it contains, the Timers of the Environments it contains, and so on.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A number representing the final time. This funcion will stop when there is no <a href=../files/Event.html>Event</a> scheduled to a time less or equal to the final time. When using instances of <a href=../files/Model.html>Models</a> within the Environment (to simulate them at the same time), this argument is optional. In this case, the default value is the greater final time amongst all instances.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">env</span> = <span class="function">Environment</span>{
    <span class="function">Timer</span>{<span class="function">Event</span>{<span class="id">action</span> = <span class="reserved">function</span>()
        <span class="id">print</span>(<span class="string">"execute 1"</span>)
    <span class="reserved">end</span>}},
    <span class="function">Timer</span>{<span class="function">Event</span>{<span class="id">action</span> = <span class="reserved">function</span>()
        <span class="id">print</span>(<span class="string">"execute 2"</span>)
    <span class="reserved">end</span>}}
}
<span class="id">env</span>:<span class="function">run</span>(<span class="number">10</span>)</code></pre>




</dd>


						    	
							
						</dl>
					

					

				</div> <!-- id="content" -->
			</div> <!-- id="main" -->

			<div id="about">
				<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
			</div> <!-- id="about" -->

		</div> <!-- id="container" -->	
	</body>
</html>

