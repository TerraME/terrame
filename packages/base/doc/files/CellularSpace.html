<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
	    
	    	<title>TerraME Types and Functions</title>
	    
	    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
		<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
	</head>

	<body>
		<div id="container">
			<div id="product">
				<div id="product_logo">
					<a href="http://www.terrame.org">
					<img src='../img/terrame.png'/><br/></div></a>
				<div id="product_name"><big><b></b></big></div>
				<div id="product_description"></div>
			</div> <!-- id="product" -->

			<div id="main">
				<div id="navigation">
					<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<h1>base</h1>
<ul>
	
		<li><a href="../index.html">Index</a></li>
	
</ul>

<!-- Module list -->


<!-- Models list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	


<!-- Types list -->

	
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Types</h1>
	

	<ul>
		
					<li>
						<a href="../files/Agent.html">Agent</a>
					</li>
				
			
		
					<li>
						<a href="../files/Automaton.html">Automaton</a>
					</li>
				
			
		
					<li>
						<a href="../files/Cell.html">Cell</a>
					</li>
				
			
		
					<li><strong>CellularSpace</strong></li>
				
			
		
					<li>
						<a href="../files/Chart.html">Chart</a>
					</li>
				
			
		
					<li>
						<a href="../files/Choice.html">Choice</a>
					</li>
				
			
		
					<li>
						<a href="../files/Clock.html">Clock</a>
					</li>
				
			
		
					<li>
						<a href="../files/Environment.html">Environment</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Event.html">Event</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Flow.html">Flow</a>
					</li>
				
			
		
					<li>
						<a href="../files/Group.html">Group</a>
					</li>
				
			
		
					<li>
						<a href="../files/InternetSender.html">InternetSender</a>
					</li>
				
			
		
					<li>
						<a href="../files/Jump.html">Jump</a>
					</li>
				
			
		
					<li>
						<a href="../files/LogFile.html">LogFile</a>
					</li>
				
			
		
					<li>
						<a href="../files/Mandatory.html">Mandatory</a>
					</li>
				
			
		
					<li>
						<a href="../files/Map.html">Map</a>
					</li>
				
			
		
					<li>
						<a href="../files/Model.html">Model</a>
					</li>
				
			
		
					<li>
						<a href="../files/Neighborhood.html">Neighborhood</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Random.html">Random</a>
					</li>
				
			
		
					<li>
						<a href="../files/SocialNetwork.html">SocialNetwork</a>
					</li>
				
			
		
					<li>
						<a href="../files/Society.html">Society</a>
					</li>
				
			
		
					<li>
						<a href="../files/State.html">State</a>
					</li>
				
			
		
					<li>
						<a href="../files/TextScreen.html">TextScreen</a>
					</li>
				
			
		
					<li>
						<a href="../files/Timer.html">Timer</a>
					</li>
				
			
		
					<li>
						<a href="../files/Trajectory.html">Trajectory</a>
					</li>
				
			
		
					<li>
						<a href="../files/UnitTest.html">UnitTest</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/VisualTable.html">VisualTable</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Files list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Functions</h1>
	

	<ul>
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/ErrorHandling.html">ErrorHandling</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/FileSystem.html">FileSystem</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Package.html">Package</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Utils.html">Utils</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Examples -->

	
		<h1><a href="../files/examples.html">Examples</a></h1>
	



<!-- Data -->

	
		<h1><a href="../files/data.html">Data</a></h1>
	



<!-- Font -->

	
		<h1><a href="../files/font.html">Font</a></h1>
	




				</div> <!-- id="navigation" -->

				<div id="content">
					<h1>CellularSpace
					
					
					</h1>

					
						<span class="description"></span>
					
					
					
					

					
						
						<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">



<span class="description">

A multivalued set of <a href=../files/Cell.html>Cells</a>. It can be retrieved from databases, files, or created directly within TerraME. Every Cell of a CellularSpace has an (x, y) location. The Cell with lower (x, y) represents the upper left location. See the table below with the description and the arguments of each data source. Calling <a href=../files/Utils.html#forEachCell>forEachCell()</a> traverses CellularSpaces.</span>


	


<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>attrname</strong>: A string with an attribute name. It is useful for files that have only one attribute value for each cell but no attribute name.
    </li> 
    
  
    <li>
	  <strong>file</strong>: A string with a file name (if it is stored in the current directory), or the complete path to a given file.
    </li> 
    
  
    <li>
	  <strong>geometry</strong>: A boolean value indicating whether the geometry should also be loaded. The default value is false. If true, each cell will have an attribute called geom with a TerraLib object.
    </li> 
    
  
    <li>
	  <strong>instance</strong>: A Cell with the description of attributes and functions. When using this argument, each Cell will have attributes and functions according to the instance. It also calls <a href=../files/Cell.html#init>Cell:init()</a> from the instance for each of its Cells. Every attribute from the Cell that is a <a href=../files/Random.html>Random</a> will be converted into <a href=../files/Random.html#sample>Random:sample()</a>. Additional functions are also created to the CellularSpace, according to the attributes of the instance. For each attribute of the instance, one function is created in the CellularSpace with the same name (note that attributes declared exclusively in <a href=../files/Cell.html#init>Cell:init()</a> will not be mapped, as they do not belong to the instance). The table below describes how each attribute is mapped:
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            Type of attribute
            </th>
          
          
            <th>
            Function within the CellularSpace
            </th>
          
        
        <tr>
        
          
            <td>
            function
            </td>
          
          
            <td>
            Call the function of each of its Cells.
            </td>
          
        
        <tr>
        
          
            <td>
            number
            </td>
          
          
            <td>
            Return the sum of the number in each of its Cells.
            </td>
          
        
        <tr>
        
          
            <td>
            boolean
            </td>
          
          
            <td>
            Return the quantity of true values in its Cells.
            </td>
          
        
        <tr>
        
          
            <td>
            string
            </td>
          
          
            <td>
            Return a table with positions equal to the unique strings and values equal to the number of occurrences in each of its Cells.
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
    <li>
	  <strong>layer</strong>: A string with the name of the layer stored in a TerraLib project.
    </li> 
    
  
    <li>
	  <strong>project</strong>: A string with the name of the TerraLib project to be used. If this name does not ends with ".tview", this extension will be added to the name of the file. It can also be an object of type Project from package terralib.
    </li> 
    
  
    <li>
	  <strong>sep</strong>: A string with the file separator. The default value is ",".
    </li> 
    
  
    <li>
	  <strong>source</strong>: A string with the name of the data source. It tries to infer the data source according to the arguments passed to the function.
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            source
            </th>
          
          
            <th>
            Description
            </th>
          
          
            <th>
            Compulsory arguments
            </th>
          
          
            <th>
            Optional arguments
            </th>
          
        
        <tr>
        
          
            <td>
            "map"
            </td>
          
          
            <td>
            Load from a text file where Cells are stored as numbers with its attribute value.
            </td>
          
          
            <td>
            
            </td>
          
          
            <td>
            attrname, sep
            </td>
          
        
        <tr>
        
          
            <td>
            "csv"
            </td>
          
          
            <td>
            Load from a Comma-separated value (.csv) file. Each column will become an attribute. It requires at least two attributes: x and y.
            </td>
          
          
            <td>
            file
            </td>
          
          
            <td>
            geometry, sep, source, ...
            </td>
          
        
        <tr>
        
          
            <td>
            "proj"
            </td>
          
          
            <td>
            Load from a layer within a TerraLib project. See the documentation of package terralib for more information.
            </td>
          
          
            <td>
            layer, project
            </td>
          
          
            <td>
            geometry, source, ...
            </td>
          
        
        <tr>
        
          
            <td>
            "shp"
            </td>
          
          
            <td>
            Load data from a shapefile. It requires three files with the same name and different extensions: .shp, .shx, and .dbf. The argument file must contain the extension .shp. Each loaded Cell will have its (x, y) location according to the attributes (row, col) or (Lin, Col) from the shapefile. The first pair keeps compatibility with TerraLib 5, while the last one is related to TerraLib 4.
            </td>
          
          
            <td>
            file
            </td>
          
          
            <td>
            geometry, source, ...
            </td>
          
        
        <tr>
        
          
            <td>
            "virtual"
            </td>
          
          
            <td>
            Create a rectangular CellularSpace from scratch. Cells will be instantiated with only two attributes, x and y, starting from (0, 0).
            </td>
          
          
            <td>
            xdim
            </td>
          
          
            <td>
            geometry, ydim, ...
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
    <li>
	  <strong>xdim</strong>: Number of columns, in the case of creating a CellularSpace without needing to load from a database.
    </li> 
    
  
    <li>
	  <strong>ydim</strong>: Number of lines, in the case of creating a CellularSpace without needing to load from a database. The default value is equal to xdim.
    </li> 
    
  
    <li>
	  <strong>...</strong>: Any other attribute or function for the CellularSpace.
    </li> 
    
  
  </span></ul>



<!-- Outputs of the function -->
  <h3>Attributes</h3>
Some attributes of CellularSpace have internal semantics. They can be used as <b>read-only</b> by the modeler.</p>
<ul>
<span class="output">
	
	<li>
	  <strong>cObj_</strong>: A pointer to a C++ representation of the CellularSpace. Never use this object.
	</li>
	
	<li>
	  <strong>cells</strong>: A vector of Cells pointed by the CellularSpace.
	</li>
	
	<li>
	  <strong>parent</strong>: The <a href=../files/Environment.html>Environment</a> it belongs.
	</li>
	
	<li>
	  <strong>xMax</strong>: The maximum value of the attribute x of its Cells.
	</li>
	
	<li>
	  <strong>xMin</strong>: The minimum value of the attribute x of its Cells.
	</li>
	
	<li>
	  <strong>yMax</strong>: The maximum value of the attribute y of its Cells.
	</li>
	
	<li>
	  <strong>yMin</strong>: The minimum value of the attribute y of its Cells.
	</li>
	
</span>
</ul>





<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">20</span>,
    <span class="id">ydim</span> = <span class="number">25</span>
}

<span class="id">states</span> = <span class="function">CellularSpace</span>{
    <span class="id">file</span> = <span class="id">filePath</span>(<span class="string">"brazilstates.shp"</span>, <span class="string">"base"</span>)
}</code></pre>




</dd>


						
						

						
							<h2 class="function_list">Functions</h2>
							<table class="function_list">
							
								
									<tr>
										<td class="name" nowrap><a href="#add">add</a>&nbsp;
<td class="summary">Add a new <a href=../files/Cell.html>Cell</a> to the CellularSpace.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#createNeighborhood">createNeighborhood</a>&nbsp;
<td class="summary">Create a <a href=../files/Neighborhood.html>Neighborhood</a> for each <a href=../files/Cell.html>Cell</a> of the CellularSpace.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#cut">cut</a>&nbsp;
<td class="summary">Cut the CellularSpace according to maximum and minimum coordinates.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#get">get</a>&nbsp;
<td class="summary">Return a <a href=../files/Cell.html>Cell</a> from the CellularSpace, given its unique identifier or its location.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#getCell">getCell</a>
										<i><font color="gray"> (deprecated)</font></i>&nbsp;
<td class="summary">Return a <a href=../files/Cell.html>Cell</a> from the CellularSpace given its x and y location.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#getCellByID">getCellByID</a>
										<i><font color="gray"> (deprecated)</font></i>&nbsp;
<td class="summary">Return a <a href=../files/Cell.html>Cell</a> from the CellularSpace given its id.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#getCells">getCells</a>
										<i><font color="gray"> (deprecated)</font></i>&nbsp;
<td class="summary">Return all the <a href=../files/Cell.html>Cells</a> of the CellularSpace as a vector.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#load">load</a>&nbsp;
<td class="summary">Load the CellularSpace from the database.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#loadNeighborhood">loadNeighborhood</a>&nbsp;
<td class="summary">Load a <a href=../files/Neighborhood.html>Neighborhood</a> stored in an external source.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#notify">notify</a>&nbsp;
<td class="summary">Notify every Observer connected to the CellularSpace.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#sample">sample</a>&nbsp;
<td class="summary">Return a random <a href=../files/Cell.html>Cell</a> from the CellularSpace.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#save">save</a>&nbsp;
<td class="summary">Save the attributes of a CellularSpace into the same database it was loaded from.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#size">size</a>
										<i><font color="gray"> (deprecated)</font></i>&nbsp;
<td class="summary">Return the number of <a href=../files/Cell.html>Cells</a> in the CellularSpace.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#split">split</a>&nbsp;
<td class="summary">Split the CellularSpace into a table of <a href=../files/Trajectory.html>Trajectories</a> according to a classification strategy.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#synchronize">synchronize</a>&nbsp;
<td class="summary">Synchronize the CellularSpace, calling the function synchronize() for each of its <a href=../files/Cell.html>Cells</a>.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="##">#</a>&nbsp;
<td class="summary">Return the number of <a href=../files/Cell.html>Cells</a> in the CellularSpace.</td>
									</tr>
								
							
						
						</table>
					

					

					<!--<br/>
					<br/>-->

					
						
						<dl class="function">
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="add">

	</a><strong>add</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Add a new <a href=../files/Cell.html>Cell</a> to the CellularSpace. It will be the last Cell of the CellularSpace when one uses <a href=../files/Utils.html#forEachCell>forEachCell()</a>.</span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A Cell.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>
}

<span class="id">cell</span> = <span class="function">Cell</span>{<span class="id">x</span> = <span class="number">10</span>, <span class="id">y</span> = <span class="number">11</span>}
<span class="id">cs</span>:<span class="function">add</span>(<span class="id">cell</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="createNeighborhood">

	</a><strong>createNeighborhood</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Create a <a href=../files/Neighborhood.html>Neighborhood</a> for each <a href=../files/Cell.html>Cell</a> of the CellularSpace.<br><br></span>


	


<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>filter</strong>: A function(Cell, Cell)->bool, where the first argument is the Cell itself and the other represent a possible neighbor. It returns true when the neighbor will be included in the relation. In the case of two CellularSpaces, this function is called twice for e ach pair of Cells, first filter(c1, c2) and then filter(c2, c1), where c1 belongs to cs1 and c2 belongs to cs2. The default value is a function that returns true.
    </li> 
    
  
    <li>
	  <strong>inmemory</strong>: If true (default), a Neighborhood will be built and stored for each Cell of the CellularSpace. The Neighborhoods will change only if the modeler add or remove neighbors explicitly. If false, a Neighborhood will be computed every time the simulation calls <a href=../files/Cell.html#getNeighborhood>Cell:getNeighborhood()</a>, for example when using <a href=../files/Utils.html#forEachNeighbor>forEachNeighbor()</a>. In this case, if any of the attributes the Neighborhood is based on changes then the resulting Neighborhood might be different. Neighborhoods not in memory also help the simulation to run with larger datasets, as they are not explicitly represented, but they consume more time as they need to be built again and again along the simulation.
    </li> 
    
  
    <li>
	  <strong>m</strong>: Number of columns. If m is even then it will be increased by one to keep the Cell in the center of the Neighborhood. The default value is 3.
    </li> 
    
  
    <li>
	  <strong>n</strong>: Number of rows. If n is even then it will be increased by one to keep the Cell in the center of the Neighborhood. The default value is m.
    </li> 
    
  
    <li>
	  <strong>name</strong>: A string with the name of the Neighborhood to be created. The default value is "1".
    </li> 
    
  
    <li>
	  <strong>self</strong>: Add the Cell as neighbor of itself? The default value is false. Note that the functions that do not require this argument always depend on a filter function, which will define whether the Cell can be neighbor of itself.
    </li> 
    
  
    <li>
	  <strong>strategy</strong>: A string with the strategy to be used for creating the Neighborhood. See the table below.
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            Strategy
            </th>
          
          
            <th>
            Description
            </th>
          
          
            <th>
            Compulsory Arguments
            </th>
          
          
            <th>
            Optional Arguments
            </th>
          
        
        <tr>
        
          
            <td>
            "3x3"
            </td>
          
          
            <td>
            A 3x3 (Couclelis) Neighborhood (Deprecated. Use mxn instead).
            </td>
          
          
            <td>
            
            </td>
          
          
            <td>
            filter, inmemory, name, weight
            </td>
          
        
        <tr>
        
          
            <td>
            "coord"
            </td>
          
          
            <td>
            A bidirected relation between two CellularSpaces connecting Cells with the same (x, y) coordinates.
            </td>
          
          
            <td>
            target
            </td>
          
          
            <td>
            inmemory, name
            </td>
          
        
        <tr>
        
          
            <td>
            "diagonal"
            </td>
          
          
            <td>
            Connect each Cell to its (at most) four diagonal neighbors.
            </td>
          
          
            <td>
            
            </td>
          
          
            <td>
            inmemory, name, self, wrap
            </td>
          
        
        <tr>
        
          
            <td>
            "function"
            </td>
          
          
            <td>
            A Neighborhood based on a function where any other Cell can be a neighbor.
            </td>
          
          
            <td>
            filter
            </td>
          
          
            <td>
            inmemory, name, weight
            </td>
          
        
        <tr>
        
          
            <td>
            "moore"(default)
            </td>
          
          
            <td>
            A Moore (queen) Neighborhood, connecting each Cell to its (at most) eight touching Cells.
            </td>
          
          
            <td>
            
            </td>
          
          
            <td>
            inmemory, name, self, wrap
            </td>
          
        
        <tr>
        
          
            <td>
            "mxn"
            </td>
          
          
            <td>
            A m (columns) by n (rows) Neighborhood within the CellularSpace or between two CellularSpaces if target is used.
            </td>
          
          
            <td>
            
            </td>
          
          
            <td>
            filter, inmemory, m, n, name, target, weight, wrap
            </td>
          
        
        <tr>
        
          
            <td>
            "vonneumann"
            </td>
          
          
            <td>
            A von Neumann (rook) Neighborhood, connecting each Cell to its (at most) four ortogonally surrounding Cells.
            </td>
          
          
            <td>
            
            </td>
          
          
            <td>
            inmemory, name, self, wrap
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
    <li>
	  <strong>target</strong>: Another CellularSpace whose Cells will be used to create neighborhoods.
    </li> 
    
  
    <li>
	  <strong>weight</strong>: A function (Cell, Cell)->number, where the first argument is the Cell itself and the other represent its neighbor. It returns the weight of the relation. This function will be called only if filter returns true.
    </li> 
    
  
    <li>
	  <strong>wrap</strong>: Will the Cells in the borders be connected to the Cells in the opposite border? The default value is false.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cell</span> = <span class="function">Cell</span>{
    <span class="id">height</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">100</span>}
}

<span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>,
    <span class="id">instance</span> = <span class="id">cell</span>
}

<span class="id">cs</span>:<span class="function">createNeighborhood</span>() <span class="comment">-- moore</span>

<span class="id">cs</span>:<span class="function">createNeighborhood</span>{
    <span class="id">name</span> = <span class="string">"moore"</span>
}

<span class="id">cs</span>:<span class="function">createNeighborhood</span>{
    <span class="id">strategy</span> = <span class="string">"vonneumann"</span>,
    <span class="id">name</span> = <span class="string">"vonneumann"</span>,
    <span class="id">self</span> = <span class="reserved">true</span>
}

<span class="id">cs</span>:<span class="function">createNeighborhood</span>{
    <span class="id">strategy</span> = <span class="string">"mxn"</span>,
    <span class="id">m</span> = <span class="number">5</span>,
    <span class="id">name</span> = <span class="string">"5"</span>,
    <span class="id">filter</span> = <span class="reserved">function</span>(<span class="id">cell</span>, <span class="id">candidate</span>)
        <span class="reserved">return</span> <span class="id">cell</span>.<span class="id">height</span> > <span class="id">candidate</span>.<span class="id">height</span>
    <span class="reserved">end</span>,
    <span class="id">weight</span> = <span class="reserved">function</span>(<span class="id">cell</span>, <span class="id">candidate</span>)
        <span class="reserved">return</span> (<span class="id">cell</span>.<span class="id">height</span> - <span class="id">candidate</span>.<span class="id">height</span>) / <span class="number">100</span>
    <span class="reserved">end</span>
}


<span class="id">cs2</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>
}

<span class="id">cs</span>:<span class="function">createNeighborhood</span>{
    <span class="id">strategy</span> = <span class="string">"mxn"</span>,
    <span class="id">target</span> = <span class="id">cs2</span>,
    <span class="id">m</span> = <span class="number">5</span>,
    <span class="id">name</span> = <span class="string">"spatialCoupling"</span>
}</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="cut">

	</a><strong>cut</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Cut the CellularSpace according to maximum and minimum coordinates. It returns a <a href=../files/Trajectory.html>Trajectory</a> with the selected <a href=../files/Cell.html>Cells</a>.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>xmax</strong>: A number with the maximum value of x.
    </li> 
    
  
    <li>
	  <strong>xmin</strong>: A number with the minimum value of x.
    </li> 
    
  
    <li>
	  <strong>ymax</strong>: A number with the maximum value of y.
    </li> 
    
  
    <li>
	  <strong>ymin</strong>: A number with the minimum value of y.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{<span class="id">xdim</span> = <span class="number">10</span>}

<span class="id">cs2</span> = <span class="id">cs</span>:<span class="function">cut</span>{<span class="id">xmin</span> = <span class="number">3</span>, <span class="id">ymax</span> = <span class="number">8</span>}
<span class="id">print</span>(#<span class="id">cs2</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="get">

	</a><strong>get</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Return a <a href=../files/Cell.html>Cell</a> from the CellularSpace, given its unique identifier or its location. If the Cell does not belong to the CellularSpace then it will return nil.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A number indicating an x coordinate. It can also be a string with the object id.
    </li> 
    
  
    <li>
	  <strong>#2</strong>: A number indicating a y coordinate. This argument is unnecessary when the first argument is a string.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{<span class="id">xdim</span> = <span class="number">10</span>}

<span class="id">cell</span> = <span class="id">cs</span>:<span class="function">get</span>(<span class="number">2</span>, <span class="number">2</span>)
<span class="id">print</span>(<span class="id">cell</span>.<span class="id">x</span>)
<span class="id">print</span>(<span class="id">cell</span>.<span class="id">y</span>)

<span class="id">cell</span> = <span class="id">cs</span>:<span class="function">get</span>(<span class="string">"5"</span>)
<span class="id">print</span>(<span class="id">cell</span>.<span class="id">id</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="getCell">

	
		

		</a><font color="gray">getCell <i>(deprecated, use
				
				<a href="../files/CellularSpace.html#get">get</a> 
			
		instead)</i></font>&nbsp;
	

</h2></dt>
<dd>

<font color="gray">
<span class="description">

Return a <a href=../files/Cell.html>Cell</a> from the CellularSpace given its x and y location.<br><br></span>










</font>


</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="getCellByID">

	
		

		</a><font color="gray">getCellByID <i>(deprecated, use
				
				<a href="../files/CellularSpace.html#get">get</a> 
			
		instead)</i></font>&nbsp;
	

</h2></dt>
<dd>

<font color="gray">
<span class="description">

Return a <a href=../files/Cell.html>Cell</a> from the CellularSpace given its id.<br><br></span>










</font>


</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="getCells">

	
		

		</a><font color="gray">getCells <i>(deprecated, use
			 
				CellularSpace.cells 
			
		instead)</i></font>&nbsp;
	

</h2></dt>
<dd>

<font color="gray">
<span class="description">

Return all the <a href=../files/Cell.html>Cells</a> of the CellularSpace as a vector.<br><br></span>










</font>


</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="load">

	</a><strong>load</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Load the CellularSpace from the database. TerraME automatically executes this function when the CellularSpace is created, but one can execute this to load the attributes again, erasing all attributes and relations created by the modeler.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{<span class="id">xdim</span> = <span class="number">10</span>}
<span class="id">cs</span>:<span class="function">load</span>()</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="loadNeighborhood">

	</a><strong>loadNeighborhood</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Load a <a href=../files/Neighborhood.html>Neighborhood</a> stored in an external source. Each <a href=../files/Cell.html>Cell</a> receives its own set of neighbors.<br><br></span>


	


<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>check</strong>: A boolean value indicating whether this function should match the layer name of the CellularSpace with the one described in the source. The default value is true.
    </li> 
    
  
    <li>
	  <strong>name</strong>: A string with the location of the Neighborhood to be loaded. See below.
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            Source
            </th>
          
          
            <th>
            Description
            </th>
          
        
        <tr>
        
          
            <td>
            "*.gal"
            </td>
          
          
            <td>
            Load a Neighborhood from contiguity relationships described as a GAL file.
            </td>
          
        
        <tr>
        
          
            <td>
            "*.gwt"
            </td>
          
          
            <td>
            Load a Neighborhood from a GWT (generalized weights) file.
            </td>
          
        
        <tr>
        
          
            <td>
            "*.gpm"
            </td>
          
          
            <td>
            Load a Neighborhood from a GPM (generalized proximity matrix) file.
            </td>
          
        
        <tr>
        
          
            <td>
            Any other
            </td>
          
          
            <td>
            Load a Neighborhood from table stored in the same database of the CellularSpace.
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
    <li>
	  <strong>source</strong>: A string with the name of the Neighborhood to be loaded within TerraME. The default value is "1".
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">file</span> = <span class="id">filePath</span>(<span class="string">"cabecadeboi900.shp"</span>, <span class="string">"base"</span>)	
}

<span class="id">cs</span>:<span class="function">loadNeighborhood</span>{<span class="id">source</span> = <span class="id">filePath</span>(<span class="string">"cabecadeboi-neigh.gpm"</span>, <span class="string">"base"</span>)}</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="notify">

	</a><strong>notify</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Notify every Observer connected to the CellularSpace.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A number representing the notification time. The default value is zero. It is also possible to use an <a href=../files/Event.html>Event</a> as argument. In this case, it will use the result of <a href=../files/Event.html#getTime>Event:getTime()</a>.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>,
    <span class="id">value</span> = <span class="number">5</span>
}

<span class="function">Chart</span>{<span class="id">target</span> = <span class="id">cs</span>}

<span class="id">cs</span>:<span class="function">notify</span>(<span class="number">1</span>)
<span class="id">cs</span>:<span class="function">notify</span>(<span class="number">2</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="sample">

	</a><strong>sample</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Return a random <a href=../files/Cell.html>Cell</a> from the CellularSpace.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>
}

<span class="id">cell</span> = <span class="id">cs</span>:<span class="function">sample</span>()
<span class="id">print</span>(<span class="id">type</span>(<span class="id">cell</span>))</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="save">

	</a><strong>save</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Save the attributes of a CellularSpace into the same database it was loaded from.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: Name of the TerraLib layer to store the saved attributes.
    </li> 
    
  
    <li>
	  <strong>#2</strong>: A vector with the names of the attributes to be saved. When saving a single attribute, you can use attrNames = "attribute" instead of attrNames = {"attribute"}.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">config</span> = <span class="id">getConfig</span>()
<span class="id">mhost</span> = <span class="id">config</span>.<span class="id">host</span>
<span class="id">muser</span> = <span class="id">config</span>.<span class="id">user</span>
<span class="id">mpassword</span> = <span class="id">config</span>.<span class="id">password</span>
<span class="id">mport</span> = <span class="id">config</span>.<span class="id">port</span>

<span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">host</span> = <span class="id">mhost</span>,
    <span class="id">user</span> = <span class="id">muser</span>,
    <span class="id">password</span> = <span class="id">mpassword</span>,
    <span class="id">port</span> = <span class="id">mport</span>,
    <span class="id">database</span> = <span class="string">"cabecadeboi"</span>,
    <span class="id">theme</span> = <span class="string">"cells900x900"</span>
}

<span class="id">cs</span>:<span class="function">save</span>(<span class="string">"themeName"</span>, <span class="string">"height_"</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="size">

	
		

		</a><font color="gray">size <i>(deprecated, use
				
				<a href="../files/CellularSpace.html##">#</a> 
			
		instead)</i></font>&nbsp;
	

</h2></dt>
<dd>

<font color="gray">
<span class="description">

Return the number of <a href=../files/Cell.html>Cells</a> in the CellularSpace.<br><br></span>










</font>


</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="split">

	</a><strong>split</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Split the CellularSpace into a table of <a href=../files/Trajectory.html>Trajectories</a> according to a classification strategy. The Trajectories will have empty intersection and union equal to the whole CellularSpace (unless function below returns nil for some <a href=../files/Cell.html>Cell</a>). It works according to the type of its only and compulsory argument.<br><br></span>


	


<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A string or a function, as follows:
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            Type of argument
            </th>
          
          
            <th>
            Description
            </th>
          
        
        <tr>
        
          
            <td>
            string
            </td>
          
          
            <td>
            The argument must represent the name of one attribute of the Cells of the CellularSpace. Split then creates one Trajectory for each possible value of the attribute using the value as name and fills them with the Cells that have the respective attribute value. If the CellularSpace has an instance and the respective attribute in the instance is a <a href=../files/Random.html>Random</a> value with discrete or categorical strategy, it will use the possible values to create Trajectories, which means that the returning Trajectories can have size zero in this case.
            </td>
          
        
        <tr>
        
          
            <td>
            function
            </td>
          
          
            <td>
            The argument is a function that gets a Cell as argument and returns a name for the Cell, which can be a number, string, or boolean value. Trajectories are then named according to the returning value.
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cell</span> = <span class="function">Cell</span>{
    <span class="id">cover</span> = <span class="function">Random</span>{<span class="string">"pasture"</span>, <span class="string">"forest"</span>},
    <span class="id">forest</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">1</span>}
}

<span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">20</span>,
    <span class="id">instance</span> = <span class="id">cell</span>
}

<span class="id">ts</span> = <span class="id">cs</span>:<span class="function">split</span>(<span class="string">"cover"</span>)
<span class="id">print</span>(#<span class="id">ts</span>.<span class="id">forest</span>) <span class="comment">-- can be zero because it comes from an instance</span>
<span class="id">print</span>(#<span class="id">ts</span>.<span class="id">pasture</span>) <span class="comment">-- also</span>

<span class="id">ts2</span> = <span class="id">cs</span>:<span class="function">split</span>(<span class="reserved">function</span>(<span class="id">cell</span>)
    <span class="reserved">if</span> <span class="id">cell</span>.<span class="id">forest</span> > <span class="number">0.5</span> <span class="reserved">then</span> 
        <span class="reserved">return</span> <span class="string">"gt"</span> 
    <span class="reserved">else</span> 
        <span class="reserved">return</span> <span class="string">"lt"</span> 
    <span class="reserved">end</span>
<span class="reserved">end</span>)

<span class="reserved">if</span> <span class="id">ts2</span>.<span class="id">gt</span> <span class="reserved">then</span> <span class="comment">-- might not exist as it does not come from an instance</span>
    <span class="id">print</span>(#<span class="id">ts2</span>.<span class="id">gt</span>)
<span class="reserved">end</span></code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="synchronize">

	</a><strong>synchronize</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Synchronize the CellularSpace, calling the function synchronize() for each of its <a href=../files/Cell.html>Cells</a>.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A string or a vector of strings with the attributes to be synchronized. If empty, TerraME synchronizes every attribute of the Cells but the (x, y) coordinates. If the CellularSpace has an instance and it implements <a href=../files/Cell.html#on_synchronize>Cell:on_synchronize()</a> then it will be called for each Cell.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cell</span> = <span class="function">Cell</span>{
    <span class="id">forest</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">1</span>}
}

<span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>,
    <span class="id">instance</span> = <span class="id">cell</span>
}

<span class="id">cs</span>:<span class="function">synchronize</span>()
<span class="id">c</span> = <span class="id">cs</span>:<span class="id">sample</span>()
<span class="id">print</span>(<span class="id">c</span>.<span class="id">forest</span>)
<span class="id">print</span>(<span class="id">c</span>.<span class="id">past</span>.<span class="id">forest</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="#">

	</a><strong>#</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Return the number of <a href=../files/Cell.html>Cells</a> in the CellularSpace.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{<span class="id">xdim</span> = <span class="number">5</span>}

<span class="id">print</span>(<span class="function">#</span><span class="id">cs</span>)</code></pre>




</dd>


						    	
							
						</dl>
					

					

				</div> <!-- id="content" -->
			</div> <!-- id="main" -->

			<div id="about">
				<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
			</div> <!-- id="about" -->

		</div> <!-- id="container" -->	
	</body>
</html>

