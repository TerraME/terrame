<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
	    
	    	<title>TerraME Types and Functions</title>
	    
	    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
		<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
	</head>

	<body>
		<div id="container">
			<div id="product">
				<div id="product_logo">
					<a href="http://www.terrame.org">
					<img src='../img/terrame.png'/><br/></div></a>
				<div id="product_name"><big><b></b></big></div>
				<div id="product_description"></div>
			</div> <!-- id="product" -->

			<div id="main">
				<div id="navigation">
					<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<h1>base</h1>
<ul>
	
		<li><a href="../index.html">Index</a></li>
	
</ul>

<!-- Module list -->


<!-- Models list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	


<!-- Types list -->

	
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Types</h1>
	

	<ul>
		
					<li>
						<a href="../files/Agent.html">Agent</a>
					</li>
				
			
		
					<li>
						<a href="../files/Automaton.html">Automaton</a>
					</li>
				
			
		
					<li>
						<a href="../files/Cell.html">Cell</a>
					</li>
				
			
		
					<li>
						<a href="../files/CellularSpace.html">CellularSpace</a>
					</li>
				
			
		
					<li>
						<a href="../files/Chart.html">Chart</a>
					</li>
				
			
		
					<li>
						<a href="../files/Choice.html">Choice</a>
					</li>
				
			
		
					<li>
						<a href="../files/Clock.html">Clock</a>
					</li>
				
			
		
					<li>
						<a href="../files/Environment.html">Environment</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Event.html">Event</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Flow.html">Flow</a>
					</li>
				
			
		
					<li>
						<a href="../files/Group.html">Group</a>
					</li>
				
			
		
					<li>
						<a href="../files/InternetSender.html">InternetSender</a>
					</li>
				
			
		
					<li>
						<a href="../files/Jump.html">Jump</a>
					</li>
				
			
		
					<li>
						<a href="../files/LogFile.html">LogFile</a>
					</li>
				
			
		
					<li>
						<a href="../files/Mandatory.html">Mandatory</a>
					</li>
				
			
		
					<li><strong>Map</strong></li>
				
			
		
					<li>
						<a href="../files/Model.html">Model</a>
					</li>
				
			
		
					<li>
						<a href="../files/Neighborhood.html">Neighborhood</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Random.html">Random</a>
					</li>
				
			
		
					<li>
						<a href="../files/SocialNetwork.html">SocialNetwork</a>
					</li>
				
			
		
					<li>
						<a href="../files/Society.html">Society</a>
					</li>
				
			
		
					<li>
						<a href="../files/State.html">State</a>
					</li>
				
			
		
					<li>
						<a href="../files/TextScreen.html">TextScreen</a>
					</li>
				
			
		
					<li>
						<a href="../files/Timer.html">Timer</a>
					</li>
				
			
		
					<li>
						<a href="../files/Trajectory.html">Trajectory</a>
					</li>
				
			
		
					<li>
						<a href="../files/UnitTest.html">UnitTest</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/VisualTable.html">VisualTable</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Files list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Functions</h1>
	

	<ul>
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/ErrorHandling.html">ErrorHandling</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/FileSystem.html">FileSystem</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Package.html">Package</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Utils.html">Utils</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Examples -->

	
		<h1><a href="../files/examples.html">Examples</a></h1>
	



<!-- Data -->

	
		<h1><a href="../files/data.html">Data</a></h1>
	



<!-- Font -->

	
		<h1><a href="../files/font.html">Font</a></h1>
	




				</div> <!-- id="navigation" -->

				<div id="content">
					<h1>Map
					
					
					</h1>

					
						<span class="description"></span>
					
					
					
					

					
						
						<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">



<span class="description">

Create a map with the spatial distribution of a given <a href=../files/CellularSpace.html>CellularSpace</a>, <a href=../files/Agent.html>Agent</a>, or <a href=../files/Society.html>Society</a>. It draws each element into the screen, according a given attribute. Each notify() draws the Map again in the screen.</span>


	


<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>background</strong>: A Map that can be used as background to plot a Society. It can also be a string with a color to be used as background.
    </li> 
    
  
    <li>
	  <strong>color</strong>: A table with the colors for the attributes. Colors can be described as strings ("red", "green", "blue", "white", "black", "yellow", "brown", "cyan", "gray", "magenta", "orange", "purple", and their light and dark compositions, such as "lightGray" and "darkGray"), as tables with three integer numbers representing RGB compositions, such as {0, 0, 0}, or even as a string with a ColorBrewer format (see <a href="http://colorbrewer2.org/" target="_blank">http://colorbrewer2.org/</a>). The colors available and the maximum number of slices for each of them are:
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            Name
            </th>
          
          
            <th>
            Max
            </th>
          
        
        <tr>
        
          
            <td>
            Accent, Dark, Set2
            </td>
          
          
            <td>
            7
            </td>
          
        
        <tr>
        
          
            <td>
            Pastel2, Set1
            </td>
          
          
            <td>
            8
            </td>
          
        
        <tr>
        
          
            <td>
            Pastel1
            </td>
          
          
            <td>
            9
            </td>
          
        
        <tr>
        
          
            <td>
            PRGn, RdYlGn, Spectral
            </td>
          
          
            <td>
            10
            </td>
          
        
        <tr>
        
          
            <td>
            BrBG, Paired, PiYG, PuOr, RdBu, RdGy, RdYlBu, Set3
            </td>
          
          
            <td>
            11
            </td>
          
        
        <tr>
        
          
            <td>
            BuGn, BuPu, OrRd, PuBu
            </td>
          
          
            <td>
            19
            </td>
          
        
        <tr>
        
          
            <td>
            Blues, GnBu, Greens, Greys, Oranges, PuBuGn, PuRd, Purples, RdPu, Reds, YlGn, YlGnBu, YlOrBr, YlOrRd
            </td>
          
          
            <td>
            20
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
    <li>
	  <strong>font</strong>: A string with a font name to draw Agents.
    </li> 
    
  
    <li>
	  <strong>grid</strong>: Draw a grid around the <a href=../files/Cell.html>Cells</a>? The default value is false.
    </li> 
    
  
    <li>
	  <strong>grouping</strong>: A string with the strategy to slice and color the data. See below.
    </li> 
    
      </span>
      <!-- Strategy of the argument -->
       
      <table class="arg_tab">
	  
      
        <tr>
        
          
            <th>
            Grouping
            </th>
          
          
            <th>
            Description
            </th>
          
          
            <th>
            Compulsory arguments
            </th>
          
          
            <th>
            Optional arguments
            </th>
          
        
        <tr>
        
          
            <td>
            "equalsteps"
            </td>
          
          
            <td>
            The values are divided into a set of slices with the same range. Each slice is associated to a given color. Equalsteps require only two colors in the argument color, one for the minimum and the other for the maximum value. The other colors are computed from a linear interpolation of the two colors.
            </td>
          
          
            <td>
            color, max, min, select, slices, target
            </td>
          
          
            <td>
            grid, invert, precision
            </td>
          
        
        <tr>
        
          
            <td>
            "placement"
            </td>
          
          
            <td>
            Observe a CellularSpace showing the number of Agents in each Cell. Values can be grouped in the same way of uniquevalue or equalsteps.
            </td>
          
          
            <td>
            color, target
            </td>
          
          
            <td>
            grid, max, min, slices, value
            </td>
          
        
        <tr>
        
          
            <td>
            "quantil"
            </td>
          
          
            <td>
            Aggregate the values into slices with approximately the same size. Values are ordered from lower to higher and then sliced. This strategy uses two colors in the same way of equalsteps.
            </td>
          
          
            <td>
            color, max, min, select, slices, target
            </td>
          
          
            <td>
            grid, invert, precision
            </td>
          
        
        <tr>
        
          
            <td>
            "stdeviation"
            </td>
          
          
            <td>
            Define slices according to the distribution of a given attribute. Values with similar positive or negative distances to the average will belong to the same slice.
            </td>
          
          
            <td>
            color, select, stdColor, target
            </td>
          
          
            <td>
            grid, precision, stdDeviation
            </td>
          
        
        <tr>
        
          
            <td>
            "uniquevalue"
            </td>
          
          
            <td>
            Associate each attribute value to a given color. Attributes with type string can only be sliced with this strategy. It can be used for CellularSpaces as well as for Society.
            </td>
          
          
            <td>
            color, select, target, value
            </td>
          
          
            <td>
            background, font, grid, label, size, symbol
            </td>
          
        
        <tr>
        
          
            <td>
            "none"
            </td>
          
          
            <td>
            Does not execute any color slicing. It can be used for CellularSpaces as well as for Society.
            </td>
          
          
            <td>
            
            </td>
          
          
            <td>
            background, color, font, grid, size, symbol, target
            </td>
          
        
        </tr>    
      </table>
      <span class="arg">
    
  
    <li>
	  <strong>invert</strong>: Invert the order of the colors when using ColorBrewer. The default value is false.
    </li> 
    
  
    <li>
	  <strong>label</strong>: A table with the labels for the attributes.
    </li> 
    
  
    <li>
	  <strong>max</strong>: The maximum value of the attribute (used only for numbers).
    </li> 
    
  
    <li>
	  <strong>min</strong>: The minimum value of the attribute (used only for numbers).
    </li> 
    
  
    <li>
	  <strong>precision</strong>: The number of decimal digits for slicing. It must be an integer number greater than zero. It indicates that differences less than 10^(-digits) will not be considered. It means that, for instance, if a slice is in the interval [1.0, 2.0] and precision is 2 (0.01), a value 0.99 might belong to such slice.
    </li> 
    
  
    <li>
	  <strong>select</strong>: A string with the name of the attribute to be visualized.
    </li> 
    
  
    <li>
	  <strong>size</strong>: The size of the font to be used to draw agents in space.
    </li> 
    
  
    <li>
	  <strong>slices</strong>: Number of colors to be used for plotting. It must be an integer number greater than one.
    </li> 
    
  
    <li>
	  <strong>stdColor</strong>: A table just as argument color. It is needed only when standard deviation is the chosen strategy.
    </li> 
    
  
    <li>
	  <strong>stdDeviation</strong>: When the grouping mode is stddeviation, it has to be one of "full", "half" "quarter", or "none".
    </li> 
    
  
    <li>
	  <strong>symbol</strong>: A string to be used to draw Agents in space. They can be any string, but there are some predefined symbols available. See the link Font in the left menu.
    </li> 
    
  
    <li>
	  <strong>target</strong>: A CellularSpace, Agent, or Society.
    </li> 
    
  
    <li>
	  <strong>value</strong>: A table with the possible values for the selected attributes.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cell</span> = <span class="function">Cell</span>{
    <span class="id">temperature</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">50</span>},
    <span class="id">seggregation</span> = <span class="function">Random</span>{<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>},
    <span class="id">forest</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">1</span>}
}

<span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>,
    <span class="id">instance</span> = <span class="id">cell</span>
}

<span class="function">Map</span>{
    <span class="id">target</span> = <span class="id">cs</span>,
    <span class="id">select</span> = <span class="string">"temperature"</span>,
    <span class="id">min</span> = <span class="number">0</span>,
    <span class="id">max</span> = <span class="number">50</span>,
    <span class="id">slices</span> = <span class="number">10</span>,
    <span class="id">color</span> = {<span class="string">"blue"</span>, <span class="string">"red"</span>}
}

<span class="function">Map</span>{
    <span class="id">target</span> = <span class="id">cs</span>,
    <span class="id">select</span> = <span class="string">"seggregation"</span>,
    <span class="id">value</span> = {<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>},
    <span class="id">color</span> = {<span class="string">"blue"</span>, <span class="string">"green"</span>, <span class="string">"red"</span>},
    <span class="id">label</span> = {<span class="string">"low"</span>, <span class="string">"medium"</span>, <span class="string">"high"</span>}
}

<span class="function">Map</span>{
    <span class="id">target</span> = <span class="id">cs</span>,
    <span class="id">select</span> = <span class="string">"forest"</span>,
    <span class="id">color</span>  = <span class="string">"RdYlGn"</span>,
    <span class="id">min</span> = <span class="number">0</span>,
    <span class="id">max</span> = <span class="number">1</span>,
    <span class="id">slices</span> = <span class="number">10</span>
}

<span class="comment">-- Visualizing the result of a function</span>
<span class="id">cell</span> = <span class="function">Cell</span>{
    <span class="id">cover</span> = <span class="reserved">function</span>(<span class="id">cell</span>)
        <span class="reserved">if</span> <span class="function">Random</span>():<span class="id">number</span>() > <span class="number">0.2</span> <span class="reserved">then</span>
            <span class="reserved">return</span> <span class="string">"pasture"</span>
        <span class="reserved">else</span>
            <span class="reserved">return</span> <span class="string">"soil"</span>
        <span class="reserved">end</span>
    <span class="reserved">end</span>
}

<span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">30</span>,
    <span class="id">instance</span> = <span class="id">cell</span>
}

<span class="function">Map</span>{
    <span class="id">target</span> = <span class="id">cs</span>,
    <span class="id">select</span> = <span class="string">"cover"</span>,
    <span class="id">value</span> = {<span class="string">"soil"</span>, <span class="string">"pasture"</span>},
    <span class="id">color</span> = {<span class="string">"brown"</span>, <span class="string">"green"</span>}
}

<span class="comment">-- Visualizing the agents of a Society</span>
<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="function">Agent</span>{},
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>
}

<span class="id">e</span> = <span class="function">Environment</span>{
    <span class="id">cs</span>,
    <span class="id">soc</span>
}

<span class="id">e</span>:<span class="id">createPlacement</span>{}

<span class="id">m</span> = <span class="function">Map</span>{
    <span class="id">target</span> = <span class="id">soc</span>,
    <span class="id">symbol</span> = <span class="string">"smile"</span>,
    <span class="id">color</span> = <span class="string">"yellow"</span>,
    <span class="id">background</span> = <span class="string">"darkGreen"</span>,
    <span class="id">grid</span> = <span class="reserved">true</span>,
    <span class="id">size</span> = <span class="number">25</span>
}</code></pre>




</dd>


						
						

						
							<h2 class="function_list">Functions</h2>
							<table class="function_list">
							
								
									<tr>
										<td class="name" nowrap><a href="#save">save</a>&nbsp;
<td class="summary">Save a Map into a file.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#update">update</a>&nbsp;
<td class="summary">Update the Map with the latest values of its target.</td>
									</tr>
								
							
						
						</table>
					

					

					<!--<br/>
					<br/>-->

					
						
						<dl class="function">
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="save">

	</a><strong>save</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Save a Map into a file. Supported extensions are bmp, jpg, png, and tiff.</span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A string with the file name.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>
}

<span class="id">map</span> = <span class="function">Map</span>{
    <span class="id">target</span> = <span class="id">cs</span>,
    <span class="id">select</span> = <span class="string">"x"</span>,
    <span class="id">min</span> = <span class="number">0</span>,
    <span class="id">max</span> = <span class="number">10</span>,
    <span class="id">slices</span> = <span class="number">4</span>,
    <span class="id">color</span> = <span class="string">"Blues"</span>
}

<span class="id">map</span>:<span class="function">save</span>(<span class="string">"file.bmp"</span>)
<span class="id">rmFile</span>(<span class="string">"file.bmp"</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="update">

	</a><strong>update</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Update the Map with the latest values of its target. It is usually recommended to use the Map as action of an <a href=../files/Event.html>Event</a> instead of calling this function explicitly.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: An optional argument that can be a number with the current time or an Event.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">cs</span> = <span class="function">CellularSpace</span>{
    <span class="id">xdim</span> = <span class="number">10</span>
}

<span class="id">map</span> = <span class="function">Map</span>{
    <span class="id">target</span> = <span class="id">cs</span>,
    <span class="id">select</span> = <span class="string">"x"</span>,
    <span class="id">min</span> = <span class="number">0</span>,
    <span class="id">max</span> = <span class="number">10</span>,
    <span class="id">slices</span> = <span class="number">4</span>,
    <span class="id">color</span> = <span class="string">"Blues"</span>
}

<span class="id">map</span>:<span class="function">update</span>()</code></pre>




</dd>


						    	
							
						</dl>
					

					

				</div> <!-- id="content" -->
			</div> <!-- id="main" -->

			<div id="about">
				<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
			</div> <!-- id="about" -->

		</div> <!-- id="container" -->	
	</body>
</html>

