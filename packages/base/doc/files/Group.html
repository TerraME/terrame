<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
	    
	    	<title>TerraME Types and Functions</title>
	    
	    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
		<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
	</head>

	<body>
		<div id="container">
			<div id="product">
				<div id="product_logo">
					<a href="http://www.terrame.org">
					<img src='../img/terrame.png'/><br/></div></a>
				<div id="product_name"><big><b></b></big></div>
				<div id="product_description"></div>
			</div> <!-- id="product" -->

			<div id="main">
				<div id="navigation">
					<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<h1>base</h1>
<ul>
	
		<li><a href="../index.html">Index</a></li>
	
</ul>

<!-- Module list -->


<!-- Models list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	


<!-- Types list -->

	
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Types</h1>
	

	<ul>
		
					<li>
						<a href="../files/Agent.html">Agent</a>
					</li>
				
			
		
					<li>
						<a href="../files/Automaton.html">Automaton</a>
					</li>
				
			
		
					<li>
						<a href="../files/Cell.html">Cell</a>
					</li>
				
			
		
					<li>
						<a href="../files/CellularSpace.html">CellularSpace</a>
					</li>
				
			
		
					<li>
						<a href="../files/Chart.html">Chart</a>
					</li>
				
			
		
					<li>
						<a href="../files/Choice.html">Choice</a>
					</li>
				
			
		
					<li>
						<a href="../files/Clock.html">Clock</a>
					</li>
				
			
		
					<li>
						<a href="../files/Environment.html">Environment</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Event.html">Event</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Flow.html">Flow</a>
					</li>
				
			
		
					<li><strong>Group</strong></li>
				
			
		
					<li>
						<a href="../files/InternetSender.html">InternetSender</a>
					</li>
				
			
		
					<li>
						<a href="../files/Jump.html">Jump</a>
					</li>
				
			
		
					<li>
						<a href="../files/LogFile.html">LogFile</a>
					</li>
				
			
		
					<li>
						<a href="../files/Mandatory.html">Mandatory</a>
					</li>
				
			
		
					<li>
						<a href="../files/Map.html">Map</a>
					</li>
				
			
		
					<li>
						<a href="../files/Model.html">Model</a>
					</li>
				
			
		
					<li>
						<a href="../files/Neighborhood.html">Neighborhood</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/Random.html">Random</a>
					</li>
				
			
		
					<li>
						<a href="../files/SocialNetwork.html">SocialNetwork</a>
					</li>
				
			
		
					<li>
						<a href="../files/Society.html">Society</a>
					</li>
				
			
		
					<li>
						<a href="../files/State.html">State</a>
					</li>
				
			
		
					<li>
						<a href="../files/TextScreen.html">TextScreen</a>
					</li>
				
			
		
					<li>
						<a href="../files/Timer.html">Timer</a>
					</li>
				
			
		
					<li>
						<a href="../files/Trajectory.html">Trajectory</a>
					</li>
				
			
		
					<li>
						<a href="../files/UnitTest.html">UnitTest</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/VisualTable.html">VisualTable</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Files list -->

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	
		<h1>Functions</h1>
	

	<ul>
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/ErrorHandling.html">ErrorHandling</a>
					</li>
				
			
		
		
					<li>
						<a href="../files/FileSystem.html">FileSystem</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Package.html">Package</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
					<li>
						<a href="../files/Utils.html">Utils</a>
					</li>
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
	</ul>


<!-- Examples -->

	
		<h1><a href="../files/examples.html">Examples</a></h1>
	



<!-- Data -->

	
		<h1><a href="../files/data.html">Data</a></h1>
	



<!-- Font -->

	
		<h1><a href="../files/font.html">Font</a></h1>
	




				</div> <!-- id="navigation" -->

				<div id="content">
					<h1>Group
					
					    (inherits <a href="../files/Society.html">
					      Society</a>)
					  
					
					</h1>

					
						<span class="description"></span>
					
					
					
					

					
						
						<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">



<span class="description">

Type that defines an ordered selection over a <a href=../files/Society.html>Society</a>. It inherits Society; therefore it is possible to apply all functions of such type to a Group. For instance, calling <a href=../files/Utils.html#forEachAgent>forEachAgent()</a> also traverses Groups.</span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>build</strong>: A boolean value indicating whether the Group should be computed when created. The default value is true.
    </li> 
    
  
    <li>
	  <strong>greater</strong>: A function (<a href=../files/Agent.html>Agent</a>, Agent)->boolean to sort the Group. Such function must return true if the first Agent has priority over the second one. When using this argument, Group compares each pair of Agents to establish an execution order to be used by <a href=../files/Utils.html#forEachAgent>forEachAgent()</a>. As default, the Group will not be ordered and so <a href=../files/Utils.html#forEachCell>forEachCell()</a> will run in the order the Agents were pushed into the Society. See <a href=../files/Utils.html#greaterByAttribute>greaterByAttribute()</a> for predefined options for this argument.
    </li> 
    
  
    <li>
	  <strong>select</strong>: A function (Agent)->boolean indicating whether an Agent of the Society should belong to the Group. If this function returns anything but false or nil for a given Agent, it will be added to the Group. If this argument is missing, all Agents will be included in the Group.
    </li> 
    
  
    <li>
	  <strong>target</strong>: The Society over which the Group will take place.
    </li> 
    
  
  </span></ul>



<!-- Outputs of the function -->
  <h3>Attributes</h3>
Some attributes of Group have internal semantics. They can be used as <b>read-only</b> by the modeler.</p>
<ul>
<span class="output">
	
	<li>
	  <strong>agents</strong>: A vector with Agents of the Group.
	</li>
	
	<li>
	  <strong>greater</strong>: The last function used to sort the Group.
	</li>
	
	<li>
	  <strong>parent</strong>: The Society used by the Group (its target).
	</li>
	
	<li>
	  <strong>select</strong>: The last function used to filter the Group.
	</li>
	
</span>
</ul>





<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{
    <span class="id">age</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">10</span>, <span class="id">max</span> = <span class="number">50</span>, <span class="id">step</span> = <span class="number">1</span>}
}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">agent</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">group</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">society</span>,
    <span class="id">select</span> = <span class="reserved">function</span>(<span class="id">agent</span>)
        <span class="reserved">return</span> <span class="id">agent</span>.<span class="id">age</span> > <span class="number">20</span>
    <span class="reserved">end</span>
}

<span class="id">groupBySize</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">society</span>,
    <span class="id">greater</span> = <span class="reserved">function</span>(<span class="id">a1</span>, <span class="id">a2</span>)
        <span class="reserved">return</span> <span class="id">a1</span>.<span class="id">age</span> > <span class="id">a2</span>.<span class="id">age</span>
    <span class="reserved">end</span>
}</code></pre>




</dd>


						
						

						
							<h2 class="function_list">Functions</h2>
							<table class="function_list">
							
								
									<tr>
										<td class="name" nowrap><a href="#add">add</a>&nbsp;
<td class="summary">Add a new <a href=../files/Agent.html>Agent</a> to the Group.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#clone">clone</a>&nbsp;
<td class="summary">Return a copy of the Group.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#filter">filter</a>&nbsp;
<td class="summary">Apply a filter over the <a href=../files/Society.html>Society</a> used as target for the Group.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#randomize">randomize</a>&nbsp;
<td class="summary">Randomize the <a href=../files/Agent.html>Agents</a> of the Group.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#rebuild">rebuild</a>&nbsp;
<td class="summary">Rebuild the Group from the <a href=../files/Society.html>Society</a> used as target.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="#sort">sort</a>&nbsp;
<td class="summary">Sort the current <a href=../files/Society.html>Society</a> subset.</td>
									</tr>
								
							
								
									<tr>
										<td class="name" nowrap><a href="##">#</a>&nbsp;
<td class="summary">Return the number of <a href=../files/Agent.html>Agents</a> in the Group.</td>
									</tr>
								
							
						
						</table>
					

					

					<!--<br/>
					<br/>-->

					
						
						<dl class="function">
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="add">

	</a><strong>add</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Add a new <a href=../files/Agent.html>Agent</a> to the Group. It will be added to the end of the list of Agents.</span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: An Agent.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{}
<span class="id">group</span> = <span class="function">Group</span>{}

<span class="id">group</span>:<span class="function">add</span>(<span class="id">agent</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="clone">

	</a><strong>clone</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Return a copy of the Group. It has the same parent, select, greater and <a href=../files/Agent.html>Agents</a>. Any change in the cloned Group will not affect the original one.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{
    <span class="id">age</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">50</span>, <span class="id">step</span> = <span class="number">1</span>}
}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">agent</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">group</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">soc</span>,
    <span class="id">select</span> = <span class="reserved">function</span>(<span class="id">agent</span>) <span class="reserved">return</span> <span class="id">agent</span>.<span class="id">age</span> < <span class="number">10</span> <span class="reserved">end</span>
}

<span class="id">group2</span> = <span class="id">group</span>:<span class="function">clone</span>()
<span class="id">print</span>(#<span class="id">group</span>)
<span class="id">print</span>(#<span class="id">group2</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="filter">

	</a><strong>filter</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Apply a filter over the <a href=../files/Society.html>Society</a> used as target for the Group. It replaces the previous set of <a href=../files/Agent.html>Agents</a> belonging to the Group.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: A function (Agent)->boolean, working in the same way of the argument select to create the Group. If this argument is missing, this function filters the Society with the function used as argument for the last call to filter itself, or then the value of argument select used to build the Group. When it cannot find any function to be used, this function will add all the Agents of the Society to the Group.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{
    <span class="id">age</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">50</span>, <span class="id">step</span> = <span class="number">1</span>}
}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">agent</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">group</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">soc</span>
}

<span class="id">group</span>:<span class="function">filter</span>(<span class="reserved">function</span>(<span class="id">agent</span>)
    <span class="reserved">return</span> <span class="id">agent</span>.<span class="id">age</span> >= <span class="number">18</span>
<span class="reserved">end</span>)</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="randomize">

	</a><strong>randomize</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Randomize the <a href=../files/Agent.html>Agents</a> of the Group. It will change the traversing order used by <a href=../files/Utils.html#forEachAgent>forEachAgent()</a>.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{
    <span class="id">age</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">50</span>, <span class="id">step</span> = <span class="number">1</span>}
}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">agent</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">group</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">soc</span>
}

<span class="id">group</span>:<span class="function">randomize</span>()</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="rebuild">

	</a><strong>rebuild</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Rebuild the Group from the <a href=../files/Society.html>Society</a> used as target. It is a shortcut to <a href=../files/Group.html#filter>Group:filter()</a> and then <a href=../files/Group.html#sort>Group:sort()</a>.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{
    <span class="id">age</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">50</span>, <span class="id">step</span> = <span class="number">1</span>}
}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">agent</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">group</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">soc</span>,
    <span class="id">select</span> = <span class="reserved">function</span>(<span class="id">agent</span>) <span class="reserved">return</span> <span class="id">agent</span>.<span class="id">age</span> < <span class="number">10</span> <span class="reserved">end</span>,
    <span class="id">greater</span> = <span class="reserved">function</span>(<span class="id">a1</span>, <span class="id">a2</span>) <span class="reserved">return</span> <span class="id">a1</span>.<span class="id">age</span> > <span class="id">a2</span>.<span class="id">age</span> <span class="reserved">end</span>
}

<span class="id">forEachAgent</span>(<span class="id">group</span>, <span class="reserved">function</span>(<span class="id">agent</span>)
    <span class="id">agent</span>.<span class="id">age</span> = <span class="id">agent</span>.<span class="id">age</span> + <span class="number">5</span>
<span class="reserved">end</span>)

<span class="id">group</span>:<span class="function">rebuild</span>()</code></pre>




</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="sort">

	</a><strong>sort</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Sort the current <a href=../files/Society.html>Society</a> subset. It updates the traversing order of the Group.<br><br></span>




<!-- Function arguments -->
  <h3>Arguments</h3>
<ul><span class="arg">

    <li>
	  <strong>#1</strong>: An ordering function (<a href=../files/Agent.html>Agent</a>, Agent)->boolean, working in the same way of argument greater to create the Group. If this argument is missing, this function sorts the Group with the function used as argument for the last call to sort itself, or then the value of argument greater used to build the Group. When it cannot find any function to be used, it shows a warning.
    </li> 
    
  
  </span></ul>







<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{
    <span class="id">age</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">50</span>, <span class="id">step</span> = <span class="number">1</span>}
}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">agent</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">group</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">soc</span>
}

<span class="id">group</span>:<span class="function">sort</span>(<span class="reserved">function</span>(<span class="id">ag1</span>, <span class="id">ag2</span>)
    <span class="reserved">return</span> <span class="id">ag1</span>.<span class="id">age</span> > <span class="id">ag2</span>.<span class="id">age</span>
<span class="reserved">end</span>)</code></pre>




<h3>See also</h3>
<ul>
	
	<li>
		

			<a href="../files/Utils.html#greaterByAttribute">greaterByAttribute (Utils)	</a>
		
	</li>
	
</ul>

</dd>


						    	
							
									<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<dt><h2><a name="#">

	</a><strong>#</strong>&nbsp;

</h2></dt>
<dd>


<span class="description">

Return the number of <a href=../files/Agent.html>Agents</a> in the Group.<br><br></span>










<h3>Usage</h3>
<pre class="example"><code><span class="id">agent</span> = <span class="function">Agent</span>{
    <span class="id">age</span> = <span class="function">Random</span>{<span class="id">min</span> = <span class="number">0</span>, <span class="id">max</span> = <span class="number">50</span>, <span class="id">step</span> = <span class="number">1</span>}
}

<span class="id">soc</span> = <span class="function">Society</span>{
    <span class="id">instance</span> = <span class="id">agent</span>,
    <span class="id">quantity</span> = <span class="number">20</span>
}

<span class="id">group</span> = <span class="function">Group</span>{
    <span class="id">target</span> = <span class="id">soc</span>,
    <span class="id">select</span> = <span class="reserved">function</span>(<span class="id">agent</span>) <span class="reserved">return</span> <span class="id">agent</span>.<span class="id">age</span> < <span class="number">10</span> <span class="reserved">end</span>
}

<span class="id">print</span>(<span class="function">#</span><span class="id">group</span>)</code></pre>




</dd>


						    	
							
						</dl>
					

					

				</div> <!-- id="content" -->
			</div> <!-- id="main" -->

			<div id="about">
				<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
			</div> <!-- id="about" -->

		</div> <!-- id="container" -->	
	</body>
</html>

